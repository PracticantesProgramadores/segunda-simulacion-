<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Juego de Fracciones - Aprende Jugando</title>
<style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
        font-family: 'Comic Sans MS', cursive, sans-serif;
     
        color: black; min-height: 100vh; padding: 20px;
        display: flex; flex-direction: column; align-items: center; overflow-x: hidden;
    }
    .landing-page, .game-page {
        max-width: 1100px; width: 100%; background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px); border-radius: 25px; padding: 30px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3); margin-bottom: 30px;
    }
    header { text-align: center; margin-bottom: 30px; }
    h1 { font-size: 3.5rem; margin-bottom: 10px; text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
        background: linear-gradient(45deg, #FFD700, #FF9800); -webkit-background-clip: text;
        -webkit-text-fill-color: transparent; }
    .subtitle { font-size: 1.5rem; opacity: 0.9; margin-bottom: 20px; }
    .intro { text-align: center; margin-bottom: 40px; font-size: 1.3rem; line-height: 1.6; }
    .features, .examples { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 40px; }
    .feature-card, .example-card {
        background: rgba(255, 255, 255, 0.15); border-radius: 20px; padding: 25px;
        text-align: center; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); transition: transform 0.3s, box-shadow 0.3s;
    }
    .feature-card:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3); }
    .feature-icon { font-size: 3.5rem; margin-bottom: 15px; }
    .feature-title { font-size: 1.5rem; margin-bottom: 15px; color: #FFD700; }
    .feature-description { font-size: 1.1rem; line-height: 1.5; }
    .example-fraction { font-size: 2.5rem; font-weight: bold; margin: 15px 0; color: #FFD700; }
    .cta-section { text-align: center; padding: 40px 20px; background: rgba(255, 255, 255, 0.15); border-radius: 20px; margin-bottom: 30px; }
    .cta-title { font-size: 2.5rem; margin-bottom: 20px; color: #FFD700; }
    .cta-description { font-size: 1.3rem; margin-bottom: 30px; max-width: 700px; margin: 0 auto 30px; line-height: 1.5; }
    .start-button, .modal-btn { padding: 12px 24px; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; }
    .start-button { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; border-radius: 50px; padding: 20px 50px; font-size: 1.8rem; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); margin-top: 20px; transition: all 0.3s; }
    .start-button:hover { transform: translateY(-5px) scale(1.05); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4); }
    .start-button:active { transform: translateY(2px); }
    .modal-overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.35); backdrop-filter: blur(4px); z-index: 1000; }
    .modal { background: rgba(255,255,255,0.95); border-radius: 22px; width: min(720px, 92%); padding: 28px; box-shadow: 0 15px 35px rgba(0,0,0,0.35); }
    .modal-title { font-size: 2rem; text-align: center; margin-bottom: 16px; color: #FF9800; }
    .modal-content { font-size: 1.05rem; line-height: 1.55; color: #333; }
    .modal-list { margin-top: 10px; display: grid; grid-template-columns: 1fr; gap: 12px; }
    .modal-actions { display: flex; justify-content: center; gap: 12px; margin-top: 22px; }
    .modal-btn.primary { background: #4CAF50; color: #fff; }
    .modal-btn.secondary { background: #9E9E9E; color: #fff; }
    footer { text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.2); width: 100%; font-size: 1rem; opacity: 0.8; }
    .character { position: absolute; font-size: 5rem; z-index: -1; opacity: 0.2; }
    .char1 { top: 10%; left: 5%; }
    .char2 { top: 15%; right: 5%; }
    .char3 { bottom: 10%; left: 8%; }
    .char4 { bottom: 15%; right: 8%; }
    .game-page { display: none; }
    .game-area { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 25px; }
    .panel { background: rgba(255, 255, 255, 0.15); border-radius: 15px; padding: 20px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); }
    .fraction-display { text-align: center; margin-bottom: 20px; }
    .fraction { font-size: 3.5rem; font-weight: bold; margin: 10px 0; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); }
    .instruction { font-size: 1.2rem; margin-bottom: 15px; text-align: center; line-height: 1.5; }
    .shape-selector { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; }
    .shape-btn, button { padding: 12px 20px; border: none; border-radius: 10px; font-size: 1.1rem; cursor: pointer; transition: all 0.3s; font-weight: bold; }
    .shape-btn { background: rgba(255, 255, 255, 0.2); color: white; }
    .shape-btn:hover { background: rgba(255, 255, 255, 0.3); transform: translateY(-3px); }
    .shape-btn.active { background: #ff9d00; color: #333; font-weight: bold; }
    .controls { display: flex; flex-direction: column; gap: 15px; }
    .control-group { display: flex; flex-direction: column; gap: 8px; }
    label { font-size: 1.1rem; }
    input { padding: 12px; border-radius: 10px; border: none; font-size: 1.1rem; text-align: center; }
    .buttons { display: flex; gap: 10px; margin-top: 10px; }
    .primary-btn { background: #4CAF50; color: white; flex: 1; }
    .primary-btn:hover { background: #45a049; transform: translateY(-3px); }
    .secondary-btn { background: #FF9800; color: white; }
    .secondary-btn:hover { background: #e68900; transform: translateY(-3px); }
    .danger-btn { background: #f44336; color: white; }
    .danger-btn:hover { background: #da190b; transform: translateY(-3px); }
    .back-btn { background: #9C27B0; color: white; margin-bottom: 15px; }
    .back-btn:hover { background: #8E24AA; transform: translateY(-3px); }
    .canvas-container { display: flex; justify-content: center; align-items: center; min-height: 350px; }
    #canvas { width: 300px; height: 300px; }
    .seg { transition: all 0.3s; cursor: pointer; fill: rgba(255, 255, 255, 0.2); stroke: rgba(255, 255, 255, 0.5); stroke-width: 1; }
    .seg:hover { opacity: 0.8; fill: rgba(255, 255, 255, 0.3); }
    .seg.selected { fill: #FF9800; stroke: #FF5722; stroke-width: 2; }
    .stats { display: flex; justify-content: space-around; margin-top: 20px; background: rgba(255, 255, 255, 0.15); border-radius: 15px; padding: 15px; }
    .stat { text-align: center; }
    .stat-value { font-size: 2rem; font-weight: bold; }
    .stat-label { font-size: 1rem; opacity: 0.9; }
    .feedback { text-align: center; margin-top: 20px; padding: 15px; border-radius: 10px; font-size: 1.2rem; font-weight: bold; min-height: 60px; display: flex; align-items: center; justify-content: center; }
    .success { background: rgba(76, 175, 80, 0.3); color: #a5d6a7; }
    .error { background: rgba(244, 67, 54, 0.3); color: #ffab91; }
    .info { background: rgba(33, 150, 243, 0.3); color: #90caf9; }
    .step-indicator { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
    .step { width: 30px; height: 30px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); display: flex; align-items: center; justify-content: center; font-weight: bold; }
    .step.active { background: #FF9800; color: #333; }
    .step.completed { background: #4CAF50; color: white; }
    .floating { animation: floating 3s ease-in-out infinite; }
    @keyframes floating {
        0% { transform: translate(0, 0px); }
        50% { transform: translate(0, 15px); }
        100% { transform: translate(0, -0px); }
    }
    @media (max-width: 768px) {
        .game-area { grid-template-columns: 1fr; }
        h1 { font-size: 2.5rem; }
        .subtitle { font-size: 1.2rem; }
        .intro { font-size: 1.1rem; }
        .character { display: none; }
    }
</style>
</head>
<body>
    <div class="character char1 floating">üî¥</div>
    <div class="character char2 floating">üü©</div>
    <div class="character char3 floating">üü¶</div>
    <div class="character char4 floating">üüß</div>

    <!-- P√ÅGINA DE ATERRIZAJE -->
    <div class="landing-page" id="landingPage">
        <header>
            <h1>¬°Aprende Fracciones Divirti√©ndote!</h1>
            <div class="subtitle">Un juego educativo las matem√°ticas sean emocionantes</div>
        </header>
        <section class="intro">
            <p>¬øSab√≠as que las fracciones est√°n en todas partes? Cuando divides una pizza, un pastel o incluso tu tiempo de juego, est√°s usando fracciones. ¬°Con nuestro juego, aprender√°s todo sobre fracciones mientras te diviertes!</p>
        </section>
        <section class="features">
            <div class="feature-card">
                <div class="feature-icon">üéÆ</div>
                <h3 class="feature-title">Juego Interactivo</h3>
                <p class="feature-description">Aprende jugando con figuras coloridas y desaf√≠os emocionantes. ¬°Cada nivel te har√° m√°s inteligente!</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üèÜ</div>
                <h3 class="feature-title">Sistema de Recompensas</h3>
                <p class="feature-description">Gana puntos, sube de nivel y desbloquea logros mientras mejoras tus habilidades matem√°ticas.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3 class="feature-title">Aprendizaje Personalizado</h3>
                <p class="feature-description">El juego se adapta a tu nivel, haciendo que cada partida sea perfecta para ti.</p>
            </div>
        </section>
        <section class="examples">
            <div class="example-card">
                <h3>Fracci√≥n 1/2</h3>
                <div class="example-fraction">¬Ω</div>
                <p class="example-description">Significa 1 parte de 2 partes iguales. ¬°Como la mitad de una pizza!</p>
            </div>
            <div class="example-card">
                <h3>Fracci√≥n 3/4</h3>
                <div class="example-fraction">¬æ</div>
                <p class="example-description">Significa 3 partes de 4 partes iguales. ¬°Como tres cuartos de un pastel!</p>
            </div>
            <div class="example-card">
                <h3>Fracci√≥n 2/3</h3>
                <div class="example-fraction">‚Öî</div>
                <p class="example-description">Significa 2 partes de 3 partes iguales. ¬°Como dos tercios de una barra de chocolate!</p>
            </div>
        </section>
        <section class="cta-section">
            <h2 class="cta-title">¬°Es Hora de Jugar!</h2>
            <p class="cta-description">¬øEst√°s listo para convertirte en un experto en fracciones? Nuestro juego te espera con divertidos desaf√≠os, colores brillantes y muchas sorpresas. ¬°Aprender matem√°ticas nunca fue tan divertido!</p>
            <button class="start-button" onclick="startGame()">¬°Comenzar a Jugar!</button>
        </section>
    </div>

    <!-- MODAL FLOTANTE CON INSTRUCCIONES -->
    <div class="modal-overlay" id="instructionsModal">
        <div class="modal">
            <div class="modal-title">¬øC√≥mo Jugar?</div>
            <div class="modal-content">
                <p>Sigue estos sencillos pasos para aprender fracciones:</p>
                <div class="modal-list">
                    <div>1. <strong>Selecciona una figura:</strong> Elige entre c√≠rculo, cuadrado o tri√°ngulo para representar tu fracci√≥n.</div>
                    <div>2. <strong>Divide la figura:</strong> Divide la figura en partes iguales seg√∫n el denominador.</div>
                    <div>3. <strong>Colorea las partes:</strong> Selecciona el n√∫mero de partes que indica el numerador.</div>
                    <div>4. <strong>Verifica tu respuesta:</strong> Comprueba tu respuesta y gana puntos por cada acierto.</div>
                </div>
                <p style="margin-top: 15px;">¬°Divi√©rtete aprendiendo matem√°ticas!</p>
            </div>
            <div class="modal-actions">
                <button class="modal-btn secondary" onclick="closeInstructions()">Cerrar</button>
                <button class="modal-btn primary" onclick="proceedToGame()">¬°A Jugar!</button>
            </div>
        </div>
    </div>

    <!-- P√ÅGINA DEL JUEGO -->
    <div class="game-page" id="gamePage">
        <button class="back-btn" onclick="goBack()">‚Üê Volver al Inicio</button>
        <h1>Juego de Fracciones</h1>
        <div class="subtitle">Aprende fracciones de forma divertida</div>
        <div class="step-indicator">
            <div class="step completed">1</div>
            <div class="step active">2</div>
            <div class="step">3</div>
            <div class="step">4</div>
        </div>
        <div class="game-area">
            <div class="panel">
                <div class="fraction-display">
                    <div class="instruction">Representa esta fracci√≥n:</div>
                    <div class="fraction" id="targetFraction">3/8</div>
                </div>
                <div class="instruction" id="currentInstruction">Selecciona una figura para comenzar</div>
                <div class="shape-selector">
                    <button class="shape-btn active" data-shape="circle">C√≠rculo</button>
                    <button class="shape-btn" data-shape="square">Cuadrado</button>
                    <button class="shape-btn" data-shape="triangle">Tri√°ngulo</button>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label for="partsInput">¬øEn cu√°ntas partes dividimos?</label>
                        <input type="number" id="partsInput" min="2" max="12" value="8">
                    </div>
                    <div class="buttons">
                        <button class="primary-btn" id="btnDivide">Dividir</button>
                        <button class="secondary-btn" id="btnVerify" disabled>Verificar</button>
                        <button class="danger-btn" id="btnReset">Limpiar</button>
                    </div>
                </div>
                <div class="feedback info" id="feedback">¬°Hola! Selecciona una figura y div√≠dela en partes.</div>
            </div>
            <div class="panel">
                <div class="canvas-container">
                    <svg id="canvas" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"></svg>
                </div>
            </div>
        </div>
        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Puntos</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="lives">3</div>
                <div class="stat-label">Intentos</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="level">1</div>
                <div class="stat-label">Nivel</div>
            </div>
        </div>
    </div>

    <footer>
        <p>Juego Educativo de Fracciones - Dise√±ado para hacer el aprendizaje divertido</p>
        <p>¬© 2025 Aprende Jugando</p>
    </footer>

    <script>
        // ===== FUNCIONES DE NAVEGACI√ìN =====
        function startGame() { 
            document.getElementById('instructionsModal').style.display = 'flex'; 
        }
        
        function closeInstructions() { 
            document.getElementById('instructionsModal').style.display = 'none'; 
        }
        
        function proceedToGame() {
            document.getElementById('instructionsModal').style.display = 'none';
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('gamePage').style.display = 'block';
            initGame();
        }
        
        function goBack() {
            document.getElementById('gamePage').style.display = 'none';
            document.getElementById('landingPage').style.display = 'block';
        }

        // ===== JUEGO DE FRACCIONES =====
        const gameState = {
            score: 0, lives: 3, level: 1,
            currentFraction: { numerator: 3, denominator: 8 },
            selectedShape: 'circle', parts: 0, selectedParts: 0
        };

        let targetFractionEl, currentInstructionEl, feedbackEl, scoreEl, livesEl, levelEl;
        let canvas, partsInput, btnDivide, btnVerify, btnReset, shapeButtons, steps;

        function initGame() {
            // Inicializar referencias a elementos del DOM
            targetFractionEl = document.getElementById('targetFraction');
            currentInstructionEl = document.getElementById('currentInstruction');
            feedbackEl = document.getElementById('feedback');
            scoreEl = document.getElementById('score');
            livesEl = document.getElementById('lives');
            levelEl = document.getElementById('level');
            canvas = document.getElementById('canvas');
            partsInput = document.getElementById('partsInput');
            btnDivide = document.getElementById('btnDivide');
            btnVerify = document.getElementById('btnVerify');
            btnReset = document.getElementById('btnReset');
            shapeButtons = document.querySelectorAll('.shape-btn');
            steps = document.querySelectorAll('.step');

            updateDisplay();
            renderShape('circle');
            
            // Event listeners
            shapeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    shapeButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.selectedShape = btn.dataset.shape;
                    renderShape(gameState.selectedShape);
                    updateInstruction();
                });
            });
            
            btnDivide.addEventListener('click', divideShape);
            btnVerify.addEventListener('click', verifyAnswer);
            btnReset.addEventListener('click', resetSelection);
            
            // Configurar entrada de partes
            partsInput.addEventListener('input', () => {
                if (partsInput.value > 12) partsInput.value = 12;
                if (partsInput.value < 2) partsInput.value = 2;
            });
            
            // Generar primera fracci√≥n
            generateNewFraction();
        }

        // Actualizar la visualizaci√≥n
        function updateDisplay() {
            targetFractionEl.textContent = `${gameState.currentFraction.numerator}/${gameState.currentFraction.denominator}`;
            scoreEl.textContent = gameState.score;
            livesEl.textContent = gameState.lives;
            levelEl.textContent = gameState.level;
            partsInput.value = gameState.currentFraction.denominator;
        }

        // Actualizar instrucciones
        function updateInstruction() {
            if (gameState.parts === 0) {
                currentInstructionEl.textContent = `Divide la figura en ${gameState.currentFraction.denominator} partes iguales`;
                feedbackEl.textContent = `Selecciona "${gameState.selectedShape}" y haz clic en "Dividir"`;
                feedbackEl.className = 'feedback info';
                updateSteps(1);
            } else {
                currentInstructionEl.textContent = `Selecciona ${gameState.currentFraction.numerator} partes`;
                feedbackEl.textContent = `Haz clic en las partes para seleccionarlas. Seleccionadas: ${gameState.selectedParts}`;
                feedbackEl.className = 'feedback info';
                updateSteps(2);
            }
        }

        // Actualizar indicador de pasos
        function updateSteps(activeStep) {
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < activeStep) step.classList.add('completed');
                else if (index + 1 === activeStep) step.classList.add('active');
            });
        }

        // Generar nueva fracci√≥n
        function generateNewFraction() {
            const maxDenominator = Math.min(4 + gameState.level, 12);
            const denominator = Math.floor(Math.random() * (maxDenominator - 2)) + 2;
            const numerator = Math.floor(Math.random() * (denominator - 1)) + 1;
            
            gameState.currentFraction = { numerator, denominator };
            gameState.parts = 0;
            gameState.selectedParts = 0;
            
            updateDisplay();
            renderShape(gameState.selectedShape);
            updateInstruction();
            btnVerify.disabled = true;
        }

        // Dividir la forma
        function divideShape() {
            const parts = parseInt(partsInput.value);
            
            if (parts < 2 || parts > 12) {
                showFeedback('¬°El n√∫mero de partes debe estar entre 2 y 12!', 'error');
                return;
            }
            
            gameState.parts = parts;
            renderShape(gameState.selectedShape, parts);
            btnVerify.disabled = false;
            updateInstruction();
            showFeedback(`¬°Perfecto! Ahora selecciona ${gameState.currentFraction.numerator} partes`, 'success');
            updateSteps(3);
        }

        // Verificar respuesta
        function verifyAnswer() {
            if (gameState.selectedParts === gameState.currentFraction.numerator) {
                gameState.score += 10;
                
                if (gameState.score >= gameState.level * 30) {
                    gameState.level++;
                    showFeedback(`¬°Correcto! +10 puntos. ¬°Subiste al nivel ${gameState.level}!`, 'success');
                } else {
                    showFeedback('¬°Correcto! +10 puntos', 'success');
                }
                
                updateSteps(4);
                
                setTimeout(() => {
                    generateNewFraction();
                }, 2000);
            } else {
                gameState.lives--;
                
                if (gameState.lives <= 0) {
                    showFeedback('¬°Game Over! Se te acabaron los intentos. Reiniciando juego...', 'error');
                    setTimeout(() => {
                        resetGame();
                    }, 3000);
                } else {
                    showFeedback(`Incorrecto. Has seleccionado ${gameState.selectedParts}, pero necesitas ${gameState.currentFraction.numerator}. Te quedan ${gameState.lives} intentos.`, 'error');
                }
            }
            
            updateDisplay();
        }

        // Reiniciar selecci√≥n
        function resetSelection() {
            gameState.selectedParts = 0;
            renderShape(gameState.selectedShape, gameState.parts);
            updateInstruction();
        }

        // Reiniciar juego completo
        function resetGame() {
            gameState.score = 0;
            gameState.lives = 3;
            gameState.level = 1;
            generateNewFraction();
            updateDisplay();
            showFeedback('¬°Juego reiniciado!', 'info');
        }

        // Mostrar retroalimentaci√≥n
        function showFeedback(message, type) {
            feedbackEl.textContent = message;
            feedbackEl.className = `feedback ${type}`;
        }

        // Renderizar forma
        function renderShape(shape, parts = 0) {
            canvas.innerHTML = '';
            
            if (parts === 0) {
                drawEmptyShape(shape);
                return;
            }
            
            if (shape === 'circle') drawCircle(parts);
            else if (shape === 'square') drawSquare(parts);
            else if (shape === 'triangle') drawTriangle(parts);
        }

        // Dibujar forma vac√≠a
        function drawEmptyShape(shape) {
            const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            let element;
            
            if (shape === 'circle') {
                element = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                element.setAttribute('cx', '200');
                element.setAttribute('cy', '200');
                element.setAttribute('r', '150');
            } else if (shape === 'square') {
                element = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                element.setAttribute('x', '50');
                element.setAttribute('y', '50');
                element.setAttribute('width', '300');
                element.setAttribute('height', '300');
            } else if (shape === 'triangle') {
                element = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                element.setAttribute('points', '200,80 80,320 320,320');
            }
            
            element.setAttribute('fill', 'rgba(255, 255, 255, 0.1)');
            element.setAttribute('stroke', 'white');
            element.setAttribute('stroke-width', '3');
            g.appendChild(element);
            canvas.appendChild(g);
        }

        // Dibujar c√≠rculo dividido
        function drawCircle(parts) {
            const cx = 200, cy = 200, r = 150;
            const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            for (let i = 0; i < parts; i++) {
                const startAngle = (i / parts) * 2 * Math.PI;
                const endAngle = ((i + 1) / parts) * 2 * Math.PI;
                
                const x1 = cx + r * Math.cos(startAngle);
                const y1 = cy + r * Math.sin(startAngle);
                const x2 = cx + r * Math.cos(endAngle);
                const y2 = cy + r * Math.sin(endAngle);
                
                const largeArcFlag = (endAngle - startAngle) <= Math.PI ? 0 : 1;
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                const d = [
                    `M ${cx} ${cy}`,
                    `L ${x1} ${y1}`,
                    `A ${r} ${r} 0 ${largeArcFlag} 1 ${x2} ${y2}`,
                    'Z'
                ].join(' ');
                
                path.setAttribute('d', d);
                path.classList.add('seg');
                path.dataset.index = i;
                
                path.addEventListener('click', () => toggleSegment(path));
                
                g.appendChild(path);
            }
            
            canvas.appendChild(g);
        }

        // Dibujar cuadrado dividido
        function drawSquare(parts) {
            const width = 300, height = 300;
            const x = 50, y = 50;
            const sliceWidth = width / parts;
            const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            for (let i = 0; i < parts; i++) {
                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                rect.setAttribute('x', x + i * sliceWidth);
                rect.setAttribute('y', y);
                rect.setAttribute('width', sliceWidth);
                rect.setAttribute('height', height);
                rect.classList.add('seg');
                rect.dataset.index = i;
                
                rect.addEventListener('click', () => toggleSegment(rect));
                
                g.appendChild(rect);
            }
            
            // Borde del cuadrado
            const border = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            border.setAttribute('x', x);
            border.setAttribute('y', y);
            border.setAttribute('width', width);
            border.setAttribute('height', height);
            border.setAttribute('fill', 'none');
            border.setAttribute('stroke', 'white');
            border.setAttribute('stroke-width', '3');
            
            canvas.appendChild(g);
            canvas.appendChild(border);
        }

        // Dibujar tri√°ngulo dividido
        function drawTriangle(parts) {
            const top = {x: 200, y: 80};
            const left = {x: 80, y: 320};
            const right = {x: 320, y: 320};
            const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            for (let i = 0; i < parts; i++) {
                const t1 = i / parts;
                const t2 = (i + 1) / parts;
                
                const x1 = left.x + (right.x - left.x) * t1;
                const x2 = left.x + (right.x - left.x) * t2;
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                const d = [
                    `M ${top.x} ${top.y}`,
                    `L ${x1} ${left.y}`,
                    `L ${x2} ${right.y}`,
                    'Z'
                ].join(' ');
                
                path.setAttribute('d', d);
                path.classList.add('seg');
                path.dataset.index = i;
                
                path.addEventListener('click', () => toggleSegment(path));
                
                g.appendChild(path);
            }
            
            // Borde del tri√°ngulo
            const border = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            border.setAttribute('points', `${top.x},${top.y} ${left.x},${left.y} ${right.x},${right.y}`);
            border.setAttribute('fill', 'none');
            border.setAttribute('stroke', 'white');
            border.setAttribute('stroke-width', '3');
            
            canvas.appendChild(g);
            canvas.appendChild(border);
        }

        // Alternar selecci√≥n de segmento
        function toggleSegment(element) {
            if (gameState.parts === 0) {
                showFeedback('Primero debes dividir la figura', 'error');
                return;
            }
            
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                gameState.selectedParts--;
            } else {
                element.classList.add('selected');
                gameState.selectedParts++;
            }
            
            updateInstruction();
        }

        // ===== EFECTOS VISUALES =====
        document.addEventListener('DOMContentLoaded', function() {
            const elements = document.querySelectorAll('.feature-card, .example-card');
            elements.forEach((element, index) => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                element.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                
                setTimeout(() => {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, 100 + (index * 100));
            });
        });
    </script>
</body>
</html>

